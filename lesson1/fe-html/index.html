<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gruß App</title>
    <style>
        /* Basis-Styling für Anfänger */
        body {
            font-family: sans-serif; /* Einfache Schriftart */
            display: flex; /* Flexbox für Zentrierung */
            justify-content: center; /* Horizontal zentrieren */
            align-items: center; /* Vertikal zentrieren */
            min-height: 100vh; /* Mindesthöhe des Viewports */
            background-color: #f0f0f0; /* Heller Hintergrund */
            margin: 0;
        }

        .container {
            background-color: white; /* Weißer Hintergrund für den Container */
            padding: 20px; /* Innenabstand */
            border-radius: 8px; /* Abgerundete Ecken */
            box-shadow: 0 2px 4px rgba(0,0,0,0.1); /* Leichter Schatten */
            text-align: center; /* Text im Container zentrieren */
        }

        h1 {
            color: #333; /* Dunklerer Text */
            margin-bottom: 20px; /* Abstand nach unten */
        }

        input[type="text"] {
            padding: 10px; /* Innenabstand im Eingabefeld */
            margin-bottom: 10px; /* Abstand nach unten */
            border: 1px solid #ccc; /* Grauer Rahmen */
            border-radius: 4px; /* Abgerundete Ecken */
            width: 80%; /* Breite des Eingabefeldes */
            max-width: 300px; /* Maximale Breite */
        }

        button {
            background-color: #007bff; /* Blauer Button */
            color: white; /* Weißer Text */
            padding: 10px 15px; /* Innenabstand des Buttons */
            border: none; /* Kein Rahmen */
            border-radius: 4px; /* Abgerundete Ecken */
            cursor: pointer; /* Mauszeiger als Zeiger */
            font-size: 16px; /* Schriftgröße */
        }

        button:hover {
            background-color: #0056b3; /* Dunklerer Blauton beim Hover */
        }

        #greetingOutput {
            margin-top: 20px; /* Abstand nach oben */
            font-size: 18px; /* Größere Schrift für den Gruß */
            color: #555; /* Grauer Text */
        }

        #errorMessage {
            margin-top: 10px;
            color: red; /* Roter Text für Fehlermeldungen */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Ihre erste Gruß-App</h1>

        <!-- Eingabefeld für den Namen -->
        <input type="text" id="nameInput" placeholder="Geben Sie Ihren Namen ein"><br>

        <!-- Button, der das Backend aufruft -->
        <button id="greetButton">Gruß aus dem Backend generieren</button>

        <!-- Bereich, wo der Gruß angezeigt wird -->
        <p id="greetingOutput"></p>

        <!-- Bereich für Fehlermeldungen -->
        <p id="errorMessage"></p>
    </div>

    <script>
        // Wir holen uns die HTML-Elemente, mit denen wir arbeiten wollen
        const nameInput = document.getElementById('nameInput'); // Das Eingabefeld
        const greetButton = document.getElementById('greetButton'); // Der Button
        const greetingOutput = document.getElementById('greetingOutput'); // Der Bereich für den Gruß
        const errorMessage = document.getElementById('errorMessage'); // Der Bereich für Fehlermeldungen

        // Die Adresse unseres Backends (muss angepasst werden!)
        // Wenn das Backend auf dem gleichen Computer läuft, aber auf einem anderen Port,
        // könnte es z.B. 'http://localhost:3000/greet' sein.
        const BACKEND_URL = 'http://localhost:3000/greet'; // BITTE HIER IHRE BACKEND-URL EINFÜGEN!

        // Eine Funktion, die aufgerufen wird, wenn der Button geklickt wird
        async function getGreeting() {
            const name = nameInput.value; // Den eingegebenen Namen auslesen

            // Prüfen, ob der Name leer ist
            if (name === "") {
                errorMessage.textContent = 'Bitte geben Sie einen Namen ein.'; // Fehlermeldung zeigen
                greetingOutput.textContent = ''; // Gruß leeren
                return; // Funktion hier beenden
            }

            errorMessage.textContent = ''; // Alte Fehlermeldungen löschen
            greetingOutput.textContent = 'Lade Gruß...'; // Ladehinweis zeigen

            try {
                // Sende eine Anfrage an das Backend
                // Wir senden den Namen als JSON-Daten im Body der Anfrage
                const response = await fetch(BACKEND_URL, {
                    method: 'POST', // Wir nutzen die POST-Methode, um Daten zu senden
                    headers: {
                        'Content-Type': 'application/json', // Wir sagen dem Backend, dass wir JSON senden
                    },
                    body: JSON.stringify({ name: name }), // Den Namen in JSON umwandeln
                });

                // Prüfen, ob die Antwort des Backends erfolgreich war
                if (!response.ok) {
                    const errorText = await response.text(); // Fehlernachricht vom Server lesen
                    throw new Error(`Fehler vom Server: ${response.status} - ${errorText}`);
                }

                // Die Antwort des Backends als JSON-Objekt lesen
                const data = await response.json();

                // Den erhaltenen Gruß im Output-Bereich anzeigen
                if (data && data.greeting) {
                    greetingOutput.textContent = data.greeting;
                } else {
                    errorMessage.textContent = 'Fehler: Backend sendete ungültigen Gruß.';
                    greetingOutput.textContent = '';
                }

            } catch (error) {
                // Wenn ein Fehler auftritt (z.B. Netzwerkfehler, Backend nicht erreichbar)
                console.error('Fehler beim Abrufen des Grußes:', error);
                errorMessage.textContent = `Ein Fehler ist aufgetreten: ${error.message}. Ist das Backend gestartet?`;
                greetingOutput.textContent = '';
            }
        }

        // Wir fügen einen Event Listener zum Button hinzu.
        // Wenn der Button geklickt wird, ruft er unsere Funktion 'getGreeting' auf.
        greetButton.addEventListener('click', getGreeting);
    </script>
</body>
</html>
